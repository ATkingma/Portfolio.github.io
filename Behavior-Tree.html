<!DOCTYPE html>
<html style="font-size: 16px;">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <meta name="keywords" content="Project Titel, About Project Titel, Mechanic name, code sniped, Mechanic name, code sniped, Mechanic name, code sniped">
    <meta name="description" content="">
    <title>Behavior Tree</title>
    <link rel="stylesheet" href="nicepage.css" media="screen">
<link rel="stylesheet" href="Behavior-tree.css" media="screen">
    <script class="u-script" type="text/javascript" src="jquery.js" defer=""></script>
    <script class="u-script" type="text/javascript" src="nicepage.js" defer=""></script>
    <meta name="generator" content="Nicepage 4.12.17, nicepage.com">
    <link id="u-theme-google-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i|Open+Sans:300,300i,400,400i,500,500i,600,600i,700,700i,800,800i">
    
    
    
    
    
    
    
    
    <script type="application/ld+json">{
		"@context": "http://schema.org",
		"@type": "Organization",
		"name": ""
}</script>
    <meta name="theme-color" content="#1f203a">
    <meta property="og:title" content="Behavior tree">
    <meta property="og:type" content="website">
  </head>
  <body class="u-body u-xl-mode"><header class="u-align-right u-clearfix u-header u-white u-header" id="sec-ab9d"><div class="u-align-left u-clearfix u-sheet u-sheet-1"></div></header>
    <section id="sidebar">
      <div class="inner">
        <nav>
          <ul>
            <li><a href="Home.html">HomePage</a></li>
            <li><a href="LevelGenerator.html">Level Generator</a></li>
            <li><a href="Behavior-Tree.html">Behavior Tree</a></li>
            <li><a href="Ragnarok.html">Ragnarok</a></li>
            <li><a href="Axe-Throw.html">Axe Throw</a></li>
            <li><a href="Editor-Tools.html">EditorTools</a></li>
            <li><a href=" "></a></li>
            <li><a href=" "></a></li>
            <li><a href=" "></a></li>
            <li><a href=" "></a></li>
            <li><a href=" "></a></li>
            <li><a href=" "></a></li>
            <li><a href=" "></a></li>
  </ul>
  </nav>
  </div>
  </section>
    <section class="u-clearfix u-section-1" id="sec-c2d1">
      <div class="u-clearfix u-sheet u-valign-middle-lg u-sheet-1">
        <h1 class="u-text u-text-default u-text-1">Behavior Tree</h1>
        <h4 class="u-align-left u-text u-text-default u-text-2">Project Status<br>Project Type<br>Project Du​ration<br>Software Used<br>Languages Used<br>Primary Role(s)<br>Github
        </h4>
        <p class="u-align-left u-text u-text-3">Finished<br>Personal Project<br>5 days<br>Unity<br>C#<br>Programmer<br>
          <a href="https://github.com/ATkingma/Behavior-tree/tree/main/Assets/Scripts" class="u-active-none u-border-none u-btn u-button-link u-button-style u-hover-none u-none u-text-palette-1-base u-btn-1" target="_blank">Click Here</a>
        </p>
        <img class="u-image u-image-default u-image-1" src="images/ezgif.com-gif-maker16.gif" alt="" data-image-width="599" data-image-height="281">
      </div>
    </section>
    <section class="u-clearfix u-section-2" id="sec-05cf">
      <div class="u-clearfix u-sheet u-valign-middle-md u-valign-middle-sm u-valign-middle-xs u-sheet-1">
        <h1 class="u-text u-text-default u-text-1">Contents</h1>
        <p class="u-text u-text-2">Because I want to learn more about AI I had to make an behavior Tree for my self. The project has 2 basic Tree's an patrolling npc and an mutant npc. I learned a lot from this project and also raised my interested further into AI.</p>
      </div>
    </section>
    <section class="u-clearfix u-section-3" id="carousel_aa64">
      <div class="u-clearfix u-sheet u-valign-middle-xs u-valign-top-sm u-sheet-1">
        <h1 class="u-text u-text-default-lg u-text-default-md u-text-default-sm u-text-default-xl u-text-1">Behavior Tree</h1>
        <p class="u-text u-text-2">The project stands out of 4 main scripts the Node,Selector,Sequence and the Tree script. The Node script is basically an data and a class holder. Where an state can inherent from so different states/sequences can be created from this class. The selector class is used to order how the Tree must behave and priorities different states and then the Sequence script wil do the same for thinks that has to be checked. and then at last the Tree this is an script that is made to be set as an parent class.</p>
      </div>
    </section>
    <section class="u-clearfix u-section-4" id="carousel_0fdf">
      <div class="u-clearfix u-sheet u-valign-bottom-sm u-valign-bottom-xs u-valign-middle-lg u-valign-middle-md u-valign-middle-xl u-sheet-1">
        <h1 class="u-text u-text-default u-text-1">Creating Tree's</h1>
        <p class="u-text u-text-2">Creating an Behavior Tree is pretty easy you can create Node state and put them in the right order. If for checking reasons an particular state has to be executed you can use an Sequence and put your check state first then the executable state. I added some code sniped from what the Node state and Patrol Task look like. Here you can see how an Node can be used as an state in the Tree. To show how the an tree can be setup I also added the Guard Behavior Tree.</p>
      </div>
    </section>
    <section class="u-clearfix u-section-5" id="sec-a981">
      <p class="u-text u-text-1">Here are some code snipeds</p>
      <div class="u-accordion u-align-center u-collapsed-by-default u-spacing-3 u-accordion-1">
        <div class="u-accordion-item">
          <a class="u-accordion-link u-black u-button-style u-text-active-white u-text-body-alt-color u-text-hover-white u-accordion-link-1" id="link-accordion-a910" aria-controls="accordion-a910" aria-selected="false">
            <span class="u-accordion-link-text">Node</span><span class="u-accordion-link-icon u-icon u-text-white u-icon-1"><svg class="u-svg-link" preserveAspectRatio="xMidYMin slice" viewBox="0 0 512 512" style=""><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#svg-6813"></use></svg><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" xml:space="preserve" class="u-svg-content" viewBox="0 0 512 512" x="0px" y="0px" id="svg-6813" style="enable-background:new 0 0 512 512;"><g><g><path d="M509.121,125.966c-3.838-3.838-10.055-3.838-13.893,0L256.005,365.194L16.771,125.966c-3.838-3.838-10.055-3.838-13.893,0    c-3.838,3.838-3.838,10.055,0,13.893l246.18,246.175c1.842,1.842,4.337,2.878,6.947,2.878c2.61,0,5.104-1.036,6.946-2.878    l246.17-246.175C512.959,136.021,512.959,129.804,509.121,125.966z"></path>
</g>
</g></svg></span>
          </a>
          <div class="u-accordion-pane u-container-style u-image u-image-1">
            <div class="u-container-layout u-container-layout-1">
                <!-- HTML generated using hilite.me --><div style="background: #333333; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><table><tr><td><pre style="margin: 0; line-height: 125%"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83</pre></td><td><pre style="margin: 0; line-height: 125%"><span style="color: #66d9ef">using</span> <span style="color: #f8f8f2">System.Collections;</span>
<span style="color: #66d9ef">using</span> <span style="color: #f8f8f2">System.Collections.Generic;</span>

<span style="color: #66d9ef">namespace</span> <span style="color: #f8f8f2">BehaviorTree</span>
<span style="color: #f8f8f2">{</span>
    <span style="color: #66d9ef">public</span> <span style="color: #66d9ef">enum</span> <span style="color: #f8f8f2">NodeState</span>
    <span style="color: #f8f8f2">{</span>
        <span style="color: #f8f8f2">running,</span>
        <span style="color: #f8f8f2">succes,</span>
        <span style="color: #f8f8f2">failure</span>
    <span style="color: #f8f8f2">}</span>

    <span style="color: #66d9ef">public</span> <span style="color: #66d9ef">class</span> <span style="color: #a6e22e">Node</span>
    <span style="color: #f8f8f2">{</span>
        <span style="color: #66d9ef">protected</span> <span style="color: #f8f8f2">NodeState</span> <span style="color: #f8f8f2">state;</span>

        <span style="color: #66d9ef">public</span> <span style="color: #f8f8f2">Node</span> <span style="color: #f8f8f2">parent;</span>

        <span style="color: #66d9ef">protected</span> <span style="color: #f8f8f2">List&lt;Node&gt;</span> <span style="color: #f8f8f2">children</span> <span style="color: #f8f8f2">=</span> <span style="color: #66d9ef">new</span> <span style="color: #f8f8f2">List&lt;Node&gt;();</span>

        <span style="color: #66d9ef">private</span> <span style="color: #f8f8f2">Dictionary&lt;</span><span style="color: #66d9ef">string</span><span style="color: #f8f8f2">,</span> <span style="color: #66d9ef">object</span><span style="color: #f8f8f2">&gt;</span> <span style="color: #f8f8f2">_dataContext</span> <span style="color: #f8f8f2">=</span> <span style="color: #66d9ef">new</span> <span style="color: #f8f8f2">Dictionary&lt;</span><span style="color: #66d9ef">string</span><span style="color: #f8f8f2">,</span> <span style="color: #66d9ef">object</span><span style="color: #f8f8f2">&gt;();</span>

        <span style="color: #66d9ef">public</span> <span style="color: #a6e22e">Node</span><span style="color: #f8f8f2">()</span>
        <span style="color: #f8f8f2">{</span>
            <span style="color: #f8f8f2">parent</span> <span style="color: #f8f8f2">=</span> <span style="color: #66d9ef">null</span><span style="color: #f8f8f2">;</span>
        <span style="color: #f8f8f2">}</span>
        <span style="color: #66d9ef">public</span> <span style="color: #a6e22e">Node</span><span style="color: #f8f8f2">(List&lt;Node&gt;</span> <span style="color: #f8f8f2">children)</span>
        <span style="color: #f8f8f2">{</span>
            <span style="color: #66d9ef">foreach</span> <span style="color: #f8f8f2">(Node</span> <span style="color: #f8f8f2">child</span> <span style="color: #66d9ef">in</span> <span style="color: #f8f8f2">children)</span>
                <span style="color: #f8f8f2">_Attach(child);</span>
        <span style="color: #f8f8f2">}</span>

        <span style="color: #66d9ef">private</span> <span style="color: #66d9ef">void</span> <span style="color: #a6e22e">_Attach</span><span style="color: #f8f8f2">(Node</span> <span style="color: #f8f8f2">node)</span>
        <span style="color: #f8f8f2">{</span>
            <span style="color: #f8f8f2">node.parent</span> <span style="color: #f8f8f2">=</span> <span style="color: #66d9ef">this</span><span style="color: #f8f8f2">;</span>
            <span style="color: #f8f8f2">children.Add(node);</span>
        <span style="color: #f8f8f2">}</span>

        <span style="color: #66d9ef">public</span> <span style="color: #66d9ef">virtual</span> <span style="color: #f8f8f2">NodeState</span> <span style="color: #a6e22e">Evaluate</span><span style="color: #f8f8f2">()</span> <span style="color: #f8f8f2">=&gt;</span> <span style="color: #f8f8f2">NodeState.failure;</span>

        <span style="color: #66d9ef">public</span> <span style="color: #66d9ef">void</span> <span style="color: #a6e22e">SetData</span><span style="color: #f8f8f2">(</span><span style="color: #66d9ef">string</span> <span style="color: #f8f8f2">key,</span> <span style="color: #66d9ef">object</span> <span style="color: #66d9ef">value</span><span style="color: #f8f8f2">)</span>
        <span style="color: #f8f8f2">{</span>
            <span style="color: #f8f8f2">_dataContext[key]</span> <span style="color: #f8f8f2">=</span> <span style="color: #66d9ef">value</span><span style="color: #f8f8f2">;</span>
        <span style="color: #f8f8f2">}</span>

        <span style="color: #66d9ef">public</span> <span style="color: #66d9ef">object</span> <span style="color: #a6e22e">GetData</span><span style="color: #f8f8f2">(</span><span style="color: #66d9ef">string</span> <span style="color: #f8f8f2">key)</span>
        <span style="color: #f8f8f2">{</span>
            <span style="color: #66d9ef">object</span> <span style="color: #66d9ef">value</span> <span style="color: #f8f8f2">=</span> <span style="color: #66d9ef">null</span><span style="color: #f8f8f2">;</span>
            <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">(_dataContext.TryGetValue(key,</span> <span style="color: #66d9ef">out</span> <span style="color: #66d9ef">value</span><span style="color: #f8f8f2">))</span>
                <span style="color: #66d9ef">return</span> <span style="color: #66d9ef">value</span><span style="color: #f8f8f2">;</span>

            <span style="color: #f8f8f2">Node</span> <span style="color: #f8f8f2">node</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">parent;</span>
            <span style="color: #66d9ef">while</span> <span style="color: #f8f8f2">(node</span> <span style="color: #f8f8f2">!=</span> <span style="color: #66d9ef">null</span><span style="color: #f8f8f2">)</span>
            <span style="color: #f8f8f2">{</span>
                <span style="color: #66d9ef">value</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">node.GetData(key);</span>
                <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">(</span><span style="color: #66d9ef">value</span> <span style="color: #f8f8f2">!=</span> <span style="color: #66d9ef">null</span><span style="color: #f8f8f2">)</span>
                    <span style="color: #66d9ef">return</span> <span style="color: #66d9ef">value</span><span style="color: #f8f8f2">;</span>
                <span style="color: #f8f8f2">node</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">node.parent;</span>
            <span style="color: #f8f8f2">}</span>
            <span style="color: #66d9ef">return</span> <span style="color: #66d9ef">null</span><span style="color: #f8f8f2">;</span>
        <span style="color: #f8f8f2">}</span>

        <span style="color: #66d9ef">public</span> <span style="color: #66d9ef">bool</span> <span style="color: #a6e22e">ClearData</span><span style="color: #f8f8f2">(</span><span style="color: #66d9ef">string</span> <span style="color: #f8f8f2">key)</span>
        <span style="color: #f8f8f2">{</span>
            <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">(_dataContext.ContainsKey(key))</span>
            <span style="color: #f8f8f2">{</span>
                <span style="color: #f8f8f2">_dataContext.Remove(key);</span>
                <span style="color: #66d9ef">return</span> <span style="color: #66d9ef">true</span><span style="color: #f8f8f2">;</span>
            <span style="color: #f8f8f2">}</span>

            <span style="color: #f8f8f2">Node</span> <span style="color: #f8f8f2">node</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">parent;</span>
            <span style="color: #66d9ef">while</span> <span style="color: #f8f8f2">(node</span> <span style="color: #f8f8f2">!=</span> <span style="color: #66d9ef">null</span><span style="color: #f8f8f2">)</span>
            <span style="color: #f8f8f2">{</span>
                <span style="color: #66d9ef">bool</span> <span style="color: #f8f8f2">cleared</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">node.ClearData(key);</span>
                <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">(cleared)</span>
                    <span style="color: #66d9ef">return</span> <span style="color: #66d9ef">true</span><span style="color: #f8f8f2">;</span>
                <span style="color: #f8f8f2">node</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">node.parent;</span>
            <span style="color: #f8f8f2">}</span>
            <span style="color: #66d9ef">return</span> <span style="color: #66d9ef">false</span><span style="color: #f8f8f2">;</span>
        <span style="color: #f8f8f2">}</span>
    <span style="color: #f8f8f2">}</span>

<span style="color: #f8f8f2">}</span>
</pre></td></tr></table></div>

            </div>
          </div>
      </div>
    </section>
    <section class="u-clearfix u-valign-middle-lg u-valign-middle-md u-valign-middle-sm u-valign-middle-xs u-section-6" id="carousel_cd13">
      <div class="u-accordion u-align-center u-collapsed-by-default u-spacing-3 u-accordion-1">
        <div class="u-accordion-item">
          <a class="u-accordion-link u-black u-button-style u-text-active-white u-text-body-alt-color u-text-hover-white u-accordion-link-1" id="link-accordion-a910" aria-controls="accordion-a910" aria-selected="false">
            <span class="u-accordion-link-text"> TaskPatrol</span><span class="u-accordion-link-icon u-icon u-text-white u-icon-1"><svg class="u-svg-link" preserveAspectRatio="xMidYMin slice" viewBox="0 0 512 512" style=""><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#svg-6813"></use></svg><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" xml:space="preserve" class="u-svg-content" viewBox="0 0 512 512" x="0px" y="0px" id="svg-6813" style="enable-background:new 0 0 512 512;"><g><g><path d="M509.121,125.966c-3.838-3.838-10.055-3.838-13.893,0L256.005,365.194L16.771,125.966c-3.838-3.838-10.055-3.838-13.893,0    c-3.838,3.838-3.838,10.055,0,13.893l246.18,246.175c1.842,1.842,4.337,2.878,6.947,2.878c2.61,0,5.104-1.036,6.946-2.878    l246.17-246.175C512.959,136.021,512.959,129.804,509.121,125.966z"></path>
</g>
</g></svg></span>
          </a>
          <div class="u-accordion-pane u-container-style u-accordion-pane-1" id="accordion-a910" aria-labelledby="link-accordion-a910">
            <div class="u-container-layout u-valign-top u-container-layout-1">
             <!-- HTML generated using hilite.me --><div style="background: #333333; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><table><tr><td><pre style="margin: 0; line-height: 125%"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63</pre></td><td><pre style="margin: 0; line-height: 125%"><span style="color: #66d9ef">using</span> <span style="color: #f8f8f2">System.Collections;</span>
<span style="color: #66d9ef">using</span> <span style="color: #f8f8f2">System.Collections.Generic;</span>
<span style="color: #66d9ef">using</span> <span style="color: #f8f8f2">UnityEngine;</span>
<span style="color: #66d9ef">using</span> <span style="color: #f8f8f2">UnityEngine.AI;</span>
<span style="color: #66d9ef">using</span> <span style="color: #f8f8f2">BehaviorTree;</span>

<span style="color: #66d9ef">public</span> <span style="color: #66d9ef">class</span> <span style="color: #a6e22e">TaskPatrol</span> <span style="color: #f8f8f2">:</span> <span style="color: #f8f8f2">Node</span>
<span style="color: #f8f8f2">{</span>
    <span style="color: #66d9ef">private</span> <span style="color: #f8f8f2">Transform</span> <span style="color: #f8f8f2">_transform;</span>
    <span style="color: #66d9ef">private</span> <span style="color: #f8f8f2">Animator</span> <span style="color: #f8f8f2">_animator;</span>
    <span style="color: #66d9ef">private</span> <span style="color: #f8f8f2">Transform[]</span> <span style="color: #f8f8f2">_waypoints;</span>
    <span style="color: #66d9ef">private</span> <span style="color: #f8f8f2">NavMeshAgent</span> <span style="color: #f8f8f2">_agent;</span>

    <span style="color: #66d9ef">private</span> <span style="color: #66d9ef">int</span> <span style="color: #f8f8f2">_currentWaypointIndex</span> <span style="color: #f8f8f2">=</span> <span style="color: #ae81ff">0</span><span style="color: #f8f8f2">;</span>

    <span style="color: #66d9ef">private</span> <span style="color: #66d9ef">float</span> <span style="color: #f8f8f2">_waitTime</span> <span style="color: #f8f8f2">=</span> <span style="color: #ae81ff">1f</span><span style="color: #f8f8f2">;</span> <span style="color: #75715e">// in seconds</span>
    <span style="color: #66d9ef">private</span> <span style="color: #66d9ef">float</span> <span style="color: #f8f8f2">_waitCounter</span> <span style="color: #f8f8f2">=</span> <span style="color: #ae81ff">0f</span><span style="color: #f8f8f2">;</span>
    <span style="color: #66d9ef">private</span> <span style="color: #66d9ef">bool</span> <span style="color: #f8f8f2">_waiting</span> <span style="color: #f8f8f2">=</span> <span style="color: #66d9ef">false</span><span style="color: #f8f8f2">;</span>

    <span style="color: #66d9ef">public</span> <span style="color: #a6e22e">TaskPatrol</span><span style="color: #f8f8f2">(Transform</span> <span style="color: #f8f8f2">transform,</span> <span style="color: #f8f8f2">Transform[]</span> <span style="color: #f8f8f2">waypoints)</span>
    <span style="color: #f8f8f2">{</span>
        <span style="color: #f8f8f2">_transform</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">transform;</span>
        <span style="color: #f8f8f2">_animator</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">transform.GetComponent&lt;Animator&gt;();</span>
        <span style="color: #f8f8f2">_waypoints</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">waypoints;</span>
        <span style="color: #f8f8f2">_animator.SetBool(</span><span style="color: #e6db74">&quot;Walking&quot;</span><span style="color: #f8f8f2">,</span> <span style="color: #66d9ef">true</span><span style="color: #f8f8f2">);</span>
        <span style="color: #f8f8f2">_agent</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">transform.GetComponent&lt;NavMeshAgent&gt;();</span>
    <span style="color: #f8f8f2">}</span>

    <span style="color: #66d9ef">public</span> <span style="color: #66d9ef">override</span> <span style="color: #f8f8f2">NodeState</span> <span style="color: #a6e22e">Evaluate</span><span style="color: #f8f8f2">()</span>
    <span style="color: #f8f8f2">{</span>
        <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">(_waiting)</span>
        <span style="color: #f8f8f2">{</span>
            <span style="color: #f8f8f2">_waitCounter</span> <span style="color: #f8f8f2">+=</span> <span style="color: #f8f8f2">Time.deltaTime;</span>
            <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">(_waitCounter</span> <span style="color: #f8f8f2">&gt;=</span> <span style="color: #f8f8f2">_waitTime)</span>
            <span style="color: #f8f8f2">{</span>
                <span style="color: #f8f8f2">_waiting</span> <span style="color: #f8f8f2">=</span> <span style="color: #66d9ef">false</span><span style="color: #f8f8f2">;</span>
                <span style="color: #f8f8f2">_animator.SetBool(</span><span style="color: #e6db74">&quot;Walking&quot;</span><span style="color: #f8f8f2">,</span> <span style="color: #66d9ef">true</span><span style="color: #f8f8f2">);</span>
            <span style="color: #f8f8f2">}</span>
        <span style="color: #f8f8f2">}</span>
        <span style="color: #66d9ef">else</span>
        <span style="color: #f8f8f2">{</span>
            <span style="color: #f8f8f2">Transform</span> <span style="color: #f8f8f2">wp</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">_waypoints[_currentWaypointIndex];</span>
            <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">(Vector3.Distance(_transform.position,</span> <span style="color: #f8f8f2">wp.position)</span> <span style="color: #f8f8f2">&lt;</span> <span style="color: #ae81ff">0.5f</span><span style="color: #f8f8f2">)</span>
            <span style="color: #f8f8f2">{</span>
                <span style="color: #f8f8f2">_transform.position</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">wp.position;</span>
                <span style="color: #f8f8f2">_waitCounter</span> <span style="color: #f8f8f2">=</span> <span style="color: #ae81ff">0f</span><span style="color: #f8f8f2">;</span>
                <span style="color: #f8f8f2">_waiting</span> <span style="color: #f8f8f2">=</span> <span style="color: #66d9ef">true</span><span style="color: #f8f8f2">;</span>

                <span style="color: #f8f8f2">_currentWaypointIndex</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">(_currentWaypointIndex</span> <span style="color: #f8f8f2">+</span> <span style="color: #ae81ff">1</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">%</span> <span style="color: #f8f8f2">_waypoints.Length;</span>
                <span style="color: #f8f8f2">_animator.SetBool(</span><span style="color: #e6db74">&quot;Walking&quot;</span><span style="color: #f8f8f2">,</span> <span style="color: #66d9ef">false</span><span style="color: #f8f8f2">);</span>
            <span style="color: #f8f8f2">}</span>
            <span style="color: #66d9ef">else</span>
            <span style="color: #f8f8f2">{</span>
                <span style="color: #f8f8f2">_agent.destination</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">wp.position;</span>
            <span style="color: #f8f8f2">}</span>
        <span style="color: #f8f8f2">}</span>


        <span style="color: #f8f8f2">state</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">NodeState.running;</span>
        <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">state;</span>
    <span style="color: #f8f8f2">}</span>

<span style="color: #f8f8f2">}</span>
</pre></td></tr></table></div>

            </div>
          </div>
        </div>
      </div>
    </section>
    <section class="u-clearfix u-valign-middle u-section-7" id="carousel_fd69">
      <div class="u-accordion u-align-center u-collapsed-by-default u-spacing-3 u-accordion-1">
        <div class="u-accordion-item">
          <a class="u-accordion-link u-black u-button-style u-text-active-white u-text-body-alt-color u-text-hover-white u-accordion-link-1" id="link-accordion-a910" aria-controls="accordion-a910" aria-selected="false">
            <span class="u-accordion-link-text"> Guard Behavior Tree</span><span class="u-accordion-link-icon u-icon u-text-white u-icon-1"><svg class="u-svg-link" preserveAspectRatio="xMidYMin slice" viewBox="0 0 512 512" style=""><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#svg-6813"></use></svg><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" xml:space="preserve" class="u-svg-content" viewBox="0 0 512 512" x="0px" y="0px" id="svg-6813" style="enable-background:new 0 0 512 512;"><g><g><path d="M509.121,125.966c-3.838-3.838-10.055-3.838-13.893,0L256.005,365.194L16.771,125.966c-3.838-3.838-10.055-3.838-13.893,0    c-3.838,3.838-3.838,10.055,0,13.893l246.18,246.175c1.842,1.842,4.337,2.878,6.947,2.878c2.61,0,5.104-1.036,6.946-2.878    l246.17-246.175C512.959,136.021,512.959,129.804,509.121,125.966z"></path>
</g>
</g></svg></span>
          </a>
          <div class="u-accordion-pane u-container-style u-accordion-pane-1" id="accordion-a910" aria-labelledby="link-accordion-a910">
            <div class="u-container-layout u-container-layout-1">
             <!-- HTML generated using hilite.me --><div style="background: #333333; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><table><tr><td><pre style="margin: 0; line-height: 125%"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31</pre></td><td><pre style="margin: 0; line-height: 125%"><span style="color: #66d9ef">using</span> <span style="color: #f8f8f2">System.Collections.Generic;</span>
<span style="color: #66d9ef">using</span> <span style="color: #f8f8f2">BehaviorTree;</span>

<span style="color: #66d9ef">public</span> <span style="color: #66d9ef">class</span> <span style="color: #a6e22e">GuardBT</span> <span style="color: #f8f8f2">:</span> <span style="color: #f8f8f2">Tree</span>
<span style="color: #f8f8f2">{</span>
    <span style="color: #66d9ef">public</span> <span style="color: #f8f8f2">UnityEngine.Transform[]</span> <span style="color: #f8f8f2">waypoints;</span>

    <span style="color: #66d9ef">public</span> <span style="color: #66d9ef">static</span> <span style="color: #66d9ef">float</span> <span style="color: #f8f8f2">fovRange</span> <span style="color: #f8f8f2">=</span> <span style="color: #ae81ff">6f</span><span style="color: #f8f8f2">;</span>
    <span style="color: #66d9ef">public</span> <span style="color: #66d9ef">static</span> <span style="color: #66d9ef">float</span> <span style="color: #f8f8f2">attackRange</span> <span style="color: #f8f8f2">=</span> <span style="color: #ae81ff">5</span><span style="color: #f8f8f2">;</span>
    <span style="color: #66d9ef">public</span> <span style="color: #f8f8f2">UnityEngine.LayerMask</span> <span style="color: #f8f8f2">targetLayer;</span>

	<span style="color: #66d9ef">protected</span> <span style="color: #66d9ef">override</span> <span style="color: #f8f8f2">Node</span> <span style="color: #a6e22e">SetupTree</span><span style="color: #f8f8f2">()</span>
    <span style="color: #f8f8f2">{</span>
        <span style="color: #f8f8f2">Node</span> <span style="color: #f8f8f2">root</span> <span style="color: #f8f8f2">=</span> <span style="color: #66d9ef">new</span> <span style="color: #f8f8f2">Selector(</span><span style="color: #66d9ef">new</span> <span style="color: #f8f8f2">List&lt;Node&gt;</span>
        <span style="color: #f8f8f2">{</span>
			<span style="color: #66d9ef">new</span> <span style="color: #a6e22e">Sequence</span><span style="color: #f8f8f2">(</span><span style="color: #66d9ef">new</span> <span style="color: #f8f8f2">List&lt;Node&gt;</span>
			<span style="color: #f8f8f2">{</span>
				<span style="color: #66d9ef">new</span> <span style="color: #a6e22e">CheckEnemyInAttackRange</span><span style="color: #f8f8f2">(transform),</span>
				<span style="color: #66d9ef">new</span> <span style="color: #a6e22e">TaskAttack</span><span style="color: #f8f8f2">(transform),</span>
			<span style="color: #f8f8f2">}),</span>
			<span style="color: #66d9ef">new</span> <span style="color: #a6e22e">Sequence</span><span style="color: #f8f8f2">(</span><span style="color: #66d9ef">new</span> <span style="color: #f8f8f2">List&lt;Node&gt;</span>
            <span style="color: #f8f8f2">{</span>
                <span style="color: #66d9ef">new</span> <span style="color: #a6e22e">CheckEnemyInFOVRange</span><span style="color: #f8f8f2">(transform,targetLayer),</span>
                <span style="color: #66d9ef">new</span> <span style="color: #a6e22e">TaskGoToTarget</span><span style="color: #f8f8f2">(transform),</span>
            <span style="color: #f8f8f2">}),</span>
            <span style="color: #66d9ef">new</span> <span style="color: #a6e22e">TaskPatrol</span><span style="color: #f8f8f2">(transform,</span> <span style="color: #f8f8f2">waypoints),</span>
        <span style="color: #f8f8f2">});</span>

        <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">root;</span>
    <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">}</span>
</pre></td></tr></table></div>

            </div>
          </div>
        </div>
      </div>
    </section>
    
    
    <footer class="u-align-center u-clearfix u-custom-color-2 u-footer u-footer" id="sec-0f65"><div class="u-clearfix u-sheet u-sheet-1">
        <p class="u-small-text u-text u-text-variant u-text-1"> © Timme Kingma 2022</p>
      </div></footer>
  </body>
</html>