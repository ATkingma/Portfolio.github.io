<!DOCTYPE html>
<html lang="en">
  <head>
    <meta
      http-equiv="Content-Security-Policy"
      content="
  default-src 'self';
  script-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com https://www.googletagmanager.com;
  style-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com;
  img-src 'self' data: https:;
  font-src 'self' https://cdnjs.cloudflare.com;
  connect-src 'self' https://www.google-analytics.com;
  media-src 'self' https:;
  object-src 'none';
  base-uri 'self';
  form-action 'self';
"
    />
    <meta http-equiv="X-Content-Type-Options" content="nosniff" />
    <meta name="referrer" content="strict-origin-when-cross-origin" />
    <meta
      name="permissions-policy"
      content="geolocation=(), microphone=(), camera=()"
    />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>CipherForge - Encryption Tool | Timme Kingma</title>
    <link rel="icon" type="image/png" href="../../img/icons/websiteIcon.png" />
    
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-B6PLVTBJ0Y"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-B6PLVTBJ0Y');
    </script>
    
    <link rel="stylesheet" href="../../css/site.css" />
    <link rel="stylesheet" href="../../css/project-page.css" />
    <link rel="stylesheet" href="../../css/skills.css" />
    <link rel="stylesheet" href="../../css/project-showcase.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />
    <script type="module" src="../../webcomponents/footer.js"></script>
  </head>
  <body>
    <section id="home"></section>
    <div class="nav-container" id="navContainer">
      <button
        class="nav-toggle"
        id="hamburgerTogle"
        aria-label="Toggle navigation"
        aria-expanded="false"
      >
        ☰
      </button>
      <nav class="nav-bar" aria-label="Main navigation">
        <a class="nav-item" href="../index.html" aria-label="Home"
          >Home
        </a>
        <a class="nav-item" href="../about-me.html" aria-label="About me"
          >About me
        </a>
        <a class="nav-item" href="../links.html" aria-label="Links">Links                  
        </a>
      </nav>
    </div>

    <script type="module" src="../../javascript/hamburger.js"></script>
  </body>
  <body>

    <!-- Page Title -->
    
    <div class="content-wrapper">
      <h1 style="font-size: 3em; margin: 80px 0 20px 0; color: #0076ff; text-align: center;">CipherForge</h1>
      <p style="text-align: center; font-size: 1.2em; color: #ffffffa1; ">Hybrid File Encryption Tool</p>
    </div>
    <!-- Main Content -->
    <div class="content-wrapper">
      <!-- Project Header -->
      <div class="project-header">
        
        <div class="project-meta">
          <span class="meta-tag">C# / .NET 8</span>
          <span class="meta-tag">Cryptography</span>
          <span class="meta-tag">WPF</span>
          <span class="meta-tag">Security</span>
        </div>
        
      </div>
      <div class="project-links">
        <a href="https://github.com/ATkingma" class="btn btn-primary">
          <i class="fab fa-github"></i>
          View Source
        </a>
        <a href="#" class="btn btn-download">
          <i class="fas fa-download"></i>
          Download
        </a>
      </div>
      
      <!-- Overview -->
      <div class="section">
        <h2 class="section-header">Overview</h2>
        <div class="section-content">
          <p>
            CipherForge is a file encryption application I built to explore advanced cryptography concepts in practice. 
            It uses hybrid encryption, combining RSA-2048 and AES-256, with password-based key protection. The project 
            includes both a command-line tool and a Windows desktop application.
          </p>
          <p>
            I wanted to create something that was actually secure, not just a toy implementation. The system uses multiple 
            layers of protection: passwords are run through PBKDF2 with 100,000 iterations, private keys are encrypted on 
            disk, and each file gets its own random encryption key. It's the kind of encryption system I'd actually trust 
            to use for sensitive files.
          </p>
        </div>
      </div>

      <!-- Security Architecture -->
      <div class="section">
        <h2 class="section-header">Security Architecture</h2>
        <div class="section-content">
          
          <div class="doc-section">
            <div class="doc-title" style="color: #ffffffce;">
              Layer 1: Password Protection
            </div>
            <div class="doc-content">
              <p>The first layer uses PBKDF2 to turn your password into a strong encryption key:</p>
              <ul>
                <li><strong>Algorithm:</strong> PBKDF2 with SHA-256</li>
                <li><strong>Iterations:</strong> 100,000 rounds (makes brute-forcing impractical)</li>
                <li><strong>Salt:</strong> Random 16-byte value stored with each key</li>
                <li><strong>Purpose:</strong> Encrypts your RSA private key on disk</li>
              </ul>
              <p>This means even if someone steals your key files, they still need your password to use them. The high 
              iteration count makes it extremely time-consuming to try guessing passwords.</p>
            </div>
          </div>

          <div class="doc-section">
            <div class="doc-title">
              Layer 2: Hybrid Encryption
            </div>
            <div class="doc-content">
              <p><strong>RSA-2048 (Asymmetric):</strong></p>
              <ul>
                <li>Generates a 2048-bit key pair when you first use the app</li>
                <li>Public key saved as <code>public.pem</code></li>
                <li>Private key saved as <code>private.enc</code> (encrypted with your password)</li>
                <li>Used to securely wrap the AES key</li>
              </ul>
              
              <p><strong>AES-256 (Symmetric):</strong></p>
              <ul>
                <li>New random 256-bit key for every file you encrypt</li>
                <li>Random 16-byte IV per file (prevents pattern recognition)</li>
                <li>CBC mode for the actual encryption</li>
                <li>Handles the heavy lifting of encrypting file content</li>
              </ul>
              
              <p><strong>Why both?</strong> RSA alone would be painfully slow for large files. AES alone would require 
              sharing secret keys. By using both, we get the security benefits of RSA for key exchange and the speed of 
              AES for the actual data.</p>
            </div>
          </div>

          <div class="doc-section">
            <div class="doc-title" style="color: #ffffffce;">
              How Encryption Works
            </div>
            <div class="doc-content">
              <pre>1. You enter your password
   ↓
2. Load or generate RSA keys
   (private key gets decrypted with your password)
   ↓
3. Generate random AES key and IV
   (unique for this file)
   ↓
4. Encrypt the AES key with your RSA public key
   ↓
5. Encrypt the file with AES
   ↓
6. Save everything together:
   [How long the encrypted key is]
   [The RSA-encrypted AES key]
   [The IV]
   [Your encrypted file data]</pre>
            </div>
          </div>

        </div>
      </div>

      <!-- Features -->
      <div class="section">
        <h2 class="section-header">Key Features</h2>
        <div class="section-content">
          <div class="feature-grid">
            <div class="feature-item">
              <h4 style="color: #ffffffce;">Hybrid Encryption</h4>
              <p>Combines RSA-2048 for key exchange with AES-256 for fast file encryption</p>
            </div>
            <div class="feature-item">
              <h4 style="color: #ffffffce;">Password Protection</h4>
              <p>Uses PBKDF2 with 100,000 iterations to protect your private keys</p>
            </div>
            <div class="feature-item">
              <h4 style="color: #ffffffce;">Two Interfaces</h4>
              <p>Command-line tool for scripts and automation, Windows GUI for everyday use</p>
            </div>
            <div class="feature-item">
              <h4 style="color: #ffffffce;">Secure Key Storage</h4>
              <p>Private keys are encrypted on disk and only decrypted when needed</p>
            </div>
            <div class="feature-item">
              <h4 style="color: #ffffffce;">Fast Performance</h4>
              <p>AES encryption means even large files process quickly</p>
            </div>
            <div class="feature-item">
              <h4 style="color: #ffffffce;">Cross-Platform Core</h4>
              <p>Core library built on .NET 8 works on Windows, Linux, and macOS</p>
            </div>
            <div class="feature-item">
              <h4 style="color: #ffffffce;">Operation Logging</h4>
              <p>Desktop app shows timestamped logs so you can see what's happening</p>
            </div>
            <div class="feature-item">
              <h4 style="color: #ffffffce;">Simple to Use</h4>
              <p>Browse for files, enter password, click encrypt - that's it</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Tech Stack -->
      <div class="section">
        <h2 class="section-header">Technology Stack</h2>
        <div class="section-content">
          <div class="tech-list">
            <span class="tech-badge">
              <i class="fas fa-code"></i>
              C# / .NET 8
            </span>
            <span class="tech-badge">
              <i class="fas fa-lock"></i>
              System.Security.Cryptography
            </span>
            <span class="tech-badge">
              <i class="fas fa-desktop"></i>
              WPF (Windows Presentation Foundation)
            </span>
            <span class="tech-badge">
              <i class="fas fa-terminal"></i>
              .NET Console App
            </span>
            <span class="tech-badge">
              <i class="fas fa-key"></i>
              RSA-2048
            </span>
            <span class="tech-badge">
              <i class="fas fa-shield-alt"></i>
              AES-256-CBC
            </span>
            <span class="tech-badge">
              <i class="fas fa-fingerprint"></i>
              PBKDF2-SHA256
            </span>
            <span class="tech-badge">
              <i class="fab fa-git-alt"></i>
              Git / GitHub
            </span>
          </div>
          
          <h3 style="margin-top: 25px; font-size: 1.2em; color: #ffffffce;">Technical Specifications</h3>
          <table style="width: 100%; border-collapse: collapse; margin-top: 15px;">
            <tr style="border-bottom: 1px solid #30363d;">
              <th style="padding: 10px; text-align: left; color: #ffffffce;">Component</th>
              <th style="padding: 10px; text-align: left; color: #ffffffce;">Technology</th>
              <th style="padding: 10px; text-align: left; color: #ffffffce;">Details</th>
            </tr>
            <tr style="border-bottom: 1px solid #30363d;">
              <td style="padding: 10px;">Core Library</td>
              <td style="padding: 10px;">.NET 8</td>
              <td style="padding: 10px;">Platform-agnostic encryption</td>
            </tr>
            <tr style="border-bottom: 1px solid #30363d;">
              <td style="padding: 10px;">RSA</td>
              <td style="padding: 10px;">2048-bit</td>
              <td style="padding: 10px;">Asymmetric encryption</td>
            </tr>
            <tr style="border-bottom: 1px solid #30363d;">
              <td style="padding: 10px;">AES</td>
              <td style="padding: 10px;">256-bit CBC</td>
              <td style="padding: 10px;">Symmetric encryption</td>
            </tr>
            <tr style="border-bottom: 1px solid #30363d;">
              <td style="padding: 10px;">PBKDF2</td>
              <td style="padding: 10px;">SHA-256</td>
              <td style="padding: 10px;">100k iterations</td>
            </tr>
            <tr style="border-bottom: 1px solid #30363d;">
              <td style="padding: 10px;">GUI</td>
              <td style="padding: 10px;">WPF</td>
              <td style="padding: 10px;">Windows desktop</td>
            </tr>
            <tr>
              <td style="padding: 10px;">CLI</td>
              <td style="padding: 10px;">Console App</td>
              <td style="padding: 10px;">Cross-platform</td>
            </tr>
          </table>
        </div>
      </div>

      <!-- Code Examples -->
      <div class="section">
        <h2 class="section-header">Code Implementation</h2>
        <div class="section-content">

          <div class="code-block">
            <div class="code-block-header" onclick="toggleCode(this)">
              <div class="code-title">
                <i class="fas fa-chevron-right code-toggle"></i>
                EncryptionService.cs - Core encryption logic with hybrid approach
              </div>
              <div class="code-actions">
                <span class="code-lang">C#</span>
                <button class="copy-code" onclick="copyCode(event, this)">Copy</button>
              </div>
            </div>
            <div class="code-content">
              <pre><code><span class="keyword">using</span> System.Security.Cryptography;

<span class="keyword">public class</span> <span class="class-name">EncryptionService</span>
{
    <span class="keyword">private readonly</span> <span class="class-name">KeyManager</span> _keyManager;

    <span class="keyword">public</span> <span class="function">EncryptionService</span>(<span class="class-name">string</span> password)
    {
        _keyManager = <span class="keyword">new</span> KeyManager();
        _keyManager.LoadOrGenerateKeys(password);
    }

    <span class="keyword">public void</span> <span class="function">EncryptFile</span>(<span class="class-name">string</span> inputFile, <span class="class-name">string</span> password, <span class="class-name">string</span> outputFile)
    {
        <span class="comment">// Generate random AES key and IV for this file</span>
        <span class="keyword">using var</span> aes = Aes.Create();
        aes.GenerateKey();  <span class="comment">// 256-bit random key</span>
        aes.GenerateIV();   <span class="comment">// 128-bit random IV</span>

        <span class="comment">// Encrypt AES key with RSA public key (hybrid encryption)</span>
        <span class="class-name">byte</span>[] encryptedKey = _keyManager.EncryptWithPublicKey(aes.Key);

        <span class="keyword">using var</span> fsOut = <span class="keyword">new</span> FileStream(outputFile, FileMode.Create);
        
        <span class="comment">// Write encrypted AES key length (4 bytes)</span>
        <span class="class-name">byte</span>[] keyLengthBytes = BitConverter.GetBytes(encryptedKey.Length);
        fsOut.Write(keyLengthBytes, <span class="number">0</span>, <span class="number">4</span>);
        
        <span class="comment">// Write RSA-encrypted AES key</span>
        fsOut.Write(encryptedKey, <span class="number">0</span>, encryptedKey.Length);
        
        <span class="comment">// Write IV (initialization vector)</span>
        fsOut.Write(aes.IV, <span class="number">0</span>, aes.IV.Length);

        <span class="comment">// Encrypt file content with AES</span>
        <span class="keyword">using var</span> cryptoStream = <span class="keyword">new</span> CryptoStream(
            fsOut, 
            aes.CreateEncryptor(), 
            CryptoStreamMode.Write
        );
        <span class="keyword">using var</span> fsIn = <span class="keyword">new</span> FileStream(inputFile, FileMode.Open);
        
        fsIn.CopyTo(cryptoStream);
    }

    <span class="keyword">public void</span> <span class="function">DecryptFile</span>(<span class="class-name">string</span> inputFile, <span class="class-name">string</span> password, <span class="class-name">string</span> outputFile)
    {
        <span class="keyword">using var</span> fsIn = <span class="keyword">new</span> FileStream(inputFile, FileMode.Open);
        
        <span class="comment">// Read encrypted AES key length</span>
        <span class="class-name">byte</span>[] keyLengthBytes = <span class="keyword">new byte</span>[<span class="number">4</span>];
        fsIn.Read(keyLengthBytes, <span class="number">0</span>, <span class="number">4</span>);
        <span class="class-name">int</span> keyLength = BitConverter.ToInt32(keyLengthBytes, <span class="number">0</span>);
        
        <span class="comment">// Read and decrypt AES key with RSA private key</span>
        <span class="class-name">byte</span>[] encryptedKey = <span class="keyword">new byte</span>[keyLength];
        fsIn.Read(encryptedKey, <span class="number">0</span>, keyLength);
        <span class="class-name">byte</span>[] aesKey = _keyManager.DecryptWithPrivateKey(encryptedKey);
        
        <span class="comment">// Read IV</span>
        <span class="class-name">byte</span>[] iv = <span class="keyword">new byte</span>[<span class="number">16</span>];
        fsIn.Read(iv, <span class="number">0</span>, <span class="number">16</span>);
        
        <span class="comment">// Decrypt file content with AES</span>
        <span class="keyword">using var</span> aes = Aes.Create();
        aes.Key = aesKey;
        aes.IV = iv;
        
        <span class="keyword">using var</span> cryptoStream = <span class="keyword">new</span> CryptoStream(
            fsIn, 
            aes.CreateDecryptor(), 
            CryptoStreamMode.Read
        );
        <span class="keyword">using var</span> fsOut = <span class="keyword">new</span> FileStream(outputFile, FileMode.Create);
        
        cryptoStream.CopyTo(fsOut);
    }
}
</code></pre>
            </div>
          </div>

          <div class="code-block">
            <div class="code-block-header" onclick="toggleCode(this)">
              <div class="code-title">
                <i class="fas fa-chevron-right code-toggle"></i>
                KeyManager.cs - Password-protected RSA key management
              </div>
              <div class="code-actions">
                <span class="code-lang">C#</span>
                <button class="copy-code" onclick="copyCode(event, this)">Copy</button>
              </div>
            </div>
            <div class="code-content">
              <pre><code><span class="keyword">using</span> System.Security.Cryptography;

<span class="keyword">public class</span> <span class="class-name">KeyManager</span>
{
    <span class="keyword">private</span> <span class="class-name">RSA</span> _rsa;

    <span class="keyword">public void</span> <span class="function">LoadOrGenerateKeys</span>(<span class="class-name">string</span> password)
    {
        <span class="keyword">if</span> (File.Exists(<span class="string">"private.enc"</span>) && File.Exists(<span class="string">"public.pem"</span>))
        {
            LoadKeys(password);
        }
        <span class="keyword">else</span>
        {
            GenerateKeys(password);
        }
    }

    <span class="keyword">private void</span> <span class="function">GenerateKeys</span>(<span class="class-name">string</span> password)
    {
        <span class="comment">// Generate 2048-bit RSA key pair</span>
        _rsa = RSA.Create(<span class="number">2048</span>);
        
        <span class="comment">// Export public key (unencrypted PEM format)</span>
        <span class="class-name">byte</span>[] publicKey = _rsa.ExportSubjectPublicKeyInfo();
        File.WriteAllBytes(<span class="string">"public.pem"</span>, publicKey);

        <span class="comment">// Export and encrypt private key with password</span>
        <span class="class-name">byte</span>[] privateKey = _rsa.ExportPkcs8PrivateKey();
        
        <span class="comment">// Generate random salt for PBKDF2</span>
        <span class="class-name">byte</span>[] salt = <span class="keyword">new byte</span>[<span class="number">16</span>];
        <span class="keyword">using</span> (<span class="keyword">var</span> rng = RandomNumberGenerator.Create())
            rng.GetBytes(salt);

        <span class="comment">// Derive key from password using PBKDF2</span>
        <span class="class-name">byte</span>[] derivedKey = DeriveKeyFromPassword(password, salt);
        
        <span class="comment">// Encrypt private key with derived key</span>
        <span class="class-name">byte</span>[] encryptedPrivateKey = EncryptPrivateKey(privateKey, derivedKey);
        
        <span class="comment">// Store salt + encrypted private key</span>
        <span class="class-name">byte</span>[] combined = <span class="keyword">new byte</span>[salt.Length + encryptedPrivateKey.Length];
        Buffer.BlockCopy(salt, <span class="number">0</span>, combined, <span class="number">0</span>, salt.Length);
        Buffer.BlockCopy(encryptedPrivateKey, <span class="number">0</span>, combined, salt.Length, 
                        encryptedPrivateKey.Length);
        
        File.WriteAllBytes(<span class="string">"private.enc"</span>, combined);
    }

    <span class="keyword">private static byte</span>[] <span class="function">DeriveKeyFromPassword</span>(<span class="class-name">string</span> password, <span class="class-name">byte</span>[] salt)
    {
        <span class="comment">// PBKDF2 with SHA-256, 100k iterations</span>
        <span class="keyword">using var</span> pbkdf2 = <span class="keyword">new</span> Rfc2898DeriveBytes(
            password, 
            salt, 
            <span class="number">100000</span>,  <span class="comment">// High iteration count for security</span>
            HashAlgorithmName.SHA256
        );
        <span class="keyword">return</span> pbkdf2.GetBytes(<span class="number">32</span>); <span class="comment">// 256-bit key</span>
    }

    <span class="keyword">public byte</span>[] <span class="function">EncryptWithPublicKey</span>(<span class="class-name">byte</span>[] data)
    {
        <span class="keyword">return</span> _rsa.Encrypt(data, RSAEncryptionPadding.OaepSHA256);
    }

    <span class="keyword">public byte</span>[] <span class="function">DecryptWithPrivateKey</span>(<span class="class-name">byte</span>[] data)
    {
        <span class="keyword">return</span> _rsa.Decrypt(data, RSAEncryptionPadding.OaepSHA256);
    }
}
</code></pre>
            </div>
          </div>

          <div class="code-block">
            <div class="code-block-header" onclick="toggleCode(this)">
              <div class="code-title">
                <i class="fas fa-chevron-right code-toggle"></i>
                MainWindow.xaml.cs - WPF interface implementation
              </div>
              <div class="code-actions">
                <span class="code-lang">C#</span>
                <button class="copy-code" onclick="copyCode(event, this)">Copy</button>
              </div>
            </div>
            <div class="code-content">
              <pre><code><span class="keyword">using</span> Microsoft.Win32;
<span class="keyword">using</span> System.Windows;

<span class="keyword">public partial class</span> <span class="class-name">MainWindow</span> : Window
{
    <span class="keyword">private</span> <span class="class-name">EncryptionService</span> _encryptionService;

    <span class="keyword">private void</span> <span class="function">EncryptButton_Click</span>(<span class="class-name">object</span> sender, <span class="class-name">RoutedEventArgs</span> e)
    {
        <span class="keyword">if</span> (<span class="keyword">string</span>.IsNullOrEmpty(FilePathTextBox.Text))
        {
            MessageBox.Show(<span class="string">"Please select a file first."</span>);
            <span class="keyword">return</span>;
        }

        <span class="keyword">if</span> (<span class="keyword">string</span>.IsNullOrEmpty(PasswordBox.Password))
        {
            MessageBox.Show(<span class="string">"Please enter a password."</span>);
            <span class="keyword">return</span>;
        }

        <span class="keyword">try</span>
        {
            LogStatus(<span class="string">"Initializing encryption..."</span>);
            
            <span class="comment">// Initialize service with password</span>
            _encryptionService = <span class="keyword">new</span> EncryptionService(PasswordBox.Password);
            
            <span class="class-name">string</span> inputFile = FilePathTextBox.Text;
            <span class="class-name">string</span> outputFile = inputFile + <span class="string">".encrypted"</span>;
            
            LogStatus(<span class="string">$"Encrypting: {Path.GetFileName(inputFile)}"</span>);
            
            <span class="comment">// Perform encryption</span>
            _encryptionService.EncryptFile(inputFile, PasswordBox.Password, outputFile);
            
            LogStatus(<span class="string">$"✓ Successfully encrypted to: {Path.GetFileName(outputFile)}"</span>);
            MessageBox.Show(<span class="string">"File encrypted successfully!"</span>, <span class="string">"Success"</span>);
        }
        <span class="keyword">catch</span> (<span class="class-name">Exception</span> ex)
        {
            LogStatus(<span class="string">$"✗ Error: {ex.Message}"</span>);
            MessageBox.Show(<span class="string">$"Encryption failed: {ex.Message}"</span>, <span class="string">"Error"</span>);
        }
    }

    <span class="keyword">private void</span> <span class="function">LogStatus</span>(<span class="class-name">string</span> message)
    {
        <span class="class-name">string</span> timestamp = DateTime.Now.ToString(<span class="string">"yyyy-MM-dd HH:mm:ss"</span>);
        StatusTextBox.AppendText(<span class="string">$"[{timestamp}] {message}\n"</span>);
        StatusTextBox.ScrollToEnd();
    }
}
</code></pre>
            </div>
          </div>

        </div>
      </div>

      <!-- Screenshots -->
      <div class="section">
        <h2 class="section-header">Screenshots</h2>
        <div class="section-content">
          <div class="media-grid">
            <div class="media-item">
              <img src="../EncryptionTool/Img/Cipherforge.png" alt="Screenshot 1">
              <div class="media-caption">Main interface</div>
            </div>
            <div class="media-item">
              <img src="../EncryptionTool/Img/before.png" alt="Screenshot 2">
              <div class="media-caption">Text before Encryption</div>
            </div>
            <div class="media-item">
              <img src="../EncryptionTool/Img/after.png" alt="Screenshot 3">
              <div class="media-caption">Text after Encryption</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Implementation -->
      <div class="section">
        <h2 class="section-header">Implementation Details</h2>
        <div class="section-content">
          
          <h3 style="font-size: 1.3em; margin-top: 0; color: #ffffffce;">Project Architecture</h3>
          <p>The project follows a clean architecture pattern with clear separation between the core encryption logic and user interfaces. This makes the code maintainable and allows the encryption library to be reused in different contexts.</p>
          
          <pre style="background: #161b22; padding: 15px; border-radius: 6px; border: 1px solid #30363d;">CipherForge/
├── CipherForge/              # Core encryption library (.NET 8)
│   ├── EncryptionService.cs  # Orchestrates encryption/decryption workflow
│   ├── KeyManager.cs         # Manages RSA key pair lifecycle
│   ├── KeyGenerator.cs       # Cryptographically secure random generation
│   ├── RsaHandler.cs         # RSA encryption/decryption operations
│   ├── AesHandler.cs         # AES encryption/decryption operations
│   └── Data/
│       └── KeyPair.cs        # Data structure for RSA key storage
│
├── CLI/                      # Command-line interface
│   └── Program.cs            # Interactive console application
│
└── WPF_Interface_CipherForge/ # Windows desktop GUI
    ├── MainWindow.xaml       # XAML UI layout
    ├── MainWindow.xaml.cs    # Event handlers and UI logic
    └── App.xaml              # Application resources and configuration</pre>

          <h3 style="font-size: 1.3em; color: #ffffffce;">Design Principles</h3>
          <div class="feature-grid" style="margin-top: 15px;">
            <div class="feature-item">
              <h4 style="color: #ffffffce;">Separation of Concerns</h4>
              <p>The core library has zero dependencies on UI frameworks. It can be used in console apps, desktop apps, web services, or mobile applications.</p>
            </div>
            <div class="feature-item">
              <h4 style="color: #ffffffce;">Single Responsibility</h4>
              <p>Each class has one job: EncryptionService coordinates, KeyManager handles keys, RsaHandler does RSA, AesHandler does AES.</p>
            </div>
            <div class="feature-item">
              <h4 style="color: #ffffffce;">Dependency Injection</h4>
              <p>Services receive their dependencies through constructors, making the code testable and reducing tight coupling.</p>
            </div>
            <div class="feature-item">
              <h4 style="color: #ffffffce;">Fail-Fast Design</h4>
              <p>Invalid states are caught early with exceptions. If the password is wrong or files are corrupted, you know immediately.</p>
            </div>
          </div>

          <h3 style="font-size: 1.3em; margin-top: 25px; color: #ffffffce;">Security Implementation</h3>
          <p>Security was built into every layer of the application from day one, not added as an afterthought.</p>
          
          <div class="doc-section">
            <div class="doc-title" style="color: #ffffffce;">
              Key Security Measures
            </div>
            <div class="doc-content">
              <ul>
                <li><strong>No plaintext passwords:</strong> Passwords are immediately converted to derived keys and never stored</li>
                <li><strong>Industry-standard algorithms:</strong> RSA-2048, AES-256, and SHA-256 are all NIST-approved</li>
                <li><strong>Random keys per file:</strong> Each file gets a unique AES key and IV</li>
                <li><strong>High iteration count:</strong> 100,000 PBKDF2 iterations makes brute-forcing extremely slow</li>
                <li><strong>Encrypted key storage:</strong> Private RSA keys are encrypted with password-derived keys</li>
                <li><strong>Salt and IV usage:</strong> Prevents rainbow tables and pattern analysis attacks</li>
                <li><strong>OAEP padding:</strong> Protects against chosen-ciphertext attacks on RSA</li>
                <li><strong>CBC mode:</strong> Each block depends on previous blocks, hiding patterns</li>
              </ul>
            </div>
          </div>

          <h3 style="font-size: 1.3em; margin-top: 25px; color: #ffffffce;">File Format Specification</h3>
          <p>The encrypted file format is carefully designed to include all necessary information for decryption while maintaining security.</p>
          
          <div style="text-align: center; margin: 20px 0;">
            <img src="../EncryptionTool/Img/datablok.png" alt="File format structure diagram" style="max-width: 100%; height: auto; border: 1px solid #30363d; border-radius: 6px; background: #161b22; padding: 20px;">
          </div>

          <div class="doc-section">
            <div class="doc-title" style="color: #ffffffce;">
              Format Details
            </div>
            <div class="doc-content">
              <ol>
                <li><strong>Encrypted Key Length (4 bytes):</strong> Int32 value indicating how many bytes to read for the encrypted AES key</li>
                <li><strong>Encrypted AES Key (256 bytes):</strong> The AES-256 key encrypted with RSA-2048 public key</li>
                <li><strong>Initialization Vector (16 bytes):</strong> Random IV used for AES-CBC mode</li>
                <li><strong>Encrypted Content (variable):</strong> Your actual file data encrypted with AES-256-CBC</li>
              </ol>
              <p>This format ensures that anyone with the correct password and private key can decrypt the file, but no information leaks about the plaintext.</p>
            </div>
          </div>
          
          <h3 style="font-size: 1.3em; margin-top: 25px; color: #ffffffce;">Performance Optimizations</h3>
          <div class="feature-grid" style="margin-top: 15px;">
            <div class="feature-item">
              <h4 style="color: #ffffffce;">Streaming I/O</h4>
              <p>Files are processed in chunks using CryptoStream. A 10GB file doesn't need 10GB of RAM.</p>
            </div>
            <div class="feature-item">
              <h4 style="color: #ffffffce;">Hardware Acceleration</h4>
              <p>AES-NI instructions on modern CPUs can encrypt at 3+ GB/s. The .NET crypto library uses these automatically.</p>
            </div>
            <div class="feature-item">
              <h4 style="color: #ffffffce;">Minimal RSA Usage</h4>
              <p>RSA is only used for the 32-byte AES key. Everything else uses fast AES encryption.</p>
            </div>
            <div class="feature-item">
              <h4 style="color: #ffffffce;">Zero-Copy Streams</h4>
              <p>Data flows directly from source to destination without intermediate buffers.</p>
            </div>
          </div>

          <h3 style="font-size: 1.3em; margin-top: 25px; color: #ffffffce;">Error Handling</h3>
          <p>The application handles various error scenarios gracefully:</p>
          <ul>
            <li><strong>Wrong password:</strong> Clear error message without exposing why it's wrong</li>
            <li><strong>Corrupted files:</strong> Detects format issues and reports specific problems</li>
            <li><strong>Missing keys:</strong> Automatically generates new key pairs if needed</li>
            <li><strong>File access errors:</strong> Provides helpful messages about permissions and locks</li>
            <li><strong>Crypto exceptions:</strong> Catches and translates technical errors into user-friendly messages</li>
          </ul>

        </div>
      </div>

    </div>

    <!-- Footer -->
    <footer-component></footer-component>

    <!-- Scripts -->
    <script src="../../javascript/hamburger.js"></script>
    <script src="../../javascript/project-showcase.js"></script>
  </body>
</html>
