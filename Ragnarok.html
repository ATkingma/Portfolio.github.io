<!DOCTYPE html>
<html style="font-size: 16px;">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <meta name="keywords" content="Project Titel, About Project Titel, Mechanic name, code sniped, Mechanic name, code sniped, Mechanic name, code sniped">
    <meta name="description" content="">
    <title>Ragnarok</title>
    <link rel="stylesheet" href="nicepage.css" media="screen">
<link rel="stylesheet" href="Ragnarok.css" media="screen">
    <script class="u-script" type="text/javascript" src="jquery.js" defer=""></script>
    <script class="u-script" type="text/javascript" src="nicepage.js" defer=""></script>
    <meta name="generator" content="Nicepage 4.12.14, nicepage.com">
    <link id="u-theme-google-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i|Open+Sans:300,300i,400,400i,500,500i,600,600i,700,700i,800,800i">
    
    
    
    
    
    
    
    <script type="application/ld+json">{
		"@context": "http://schema.org",
		"@type": "Organization",
		"name": ""
}</script>
    <meta name="theme-color" content="#1f203a">
    <meta property="og:title" content="Ragnarok">
    <meta property="og:type" content="website">
  </head>
  <body class="u-body u-xl-mode"><header class="u-align-right u-clearfix u-header u-white u-header" id="sec-ab9d"><div class="u-align-left u-clearfix u-sheet u-sheet-1"></div></header>
    <section id="sidebar">
      <div class="inner">
        <nav>
          <ul>
            <li><a href="Home.html">HomePage</a></li>
            <li><a href="LevelGenerator.html">LevelGenerator</a></li>
            <li><a href="Ragnarok.html">Ragnarok</a></li>
            <li><a href="Axe-Throw.html">AxeThrow</a></li>
            <li><a href="Editor-Tools.html">EditorTools</a></li>
            <li><a href=" "></a></li>
            <li><a href=" "></a></li>
            <li><a href=" "></a></li>
            <li><a href=" "></a></li>
            <li><a href=" "></a></li>
            <li><a href=" "></a></li>
            <li><a href=" "></a></li>
  </ul>
  </nav>
  </div>
  </section>
    <section class="u-clearfix u-section-1" id="sec-c2d1">
      <div class="u-clearfix u-sheet u-valign-middle-lg u-valign-middle-md u-sheet-1">
        <h1 class="u-text u-text-default u-text-1">Ragnarok</h1>
        <h4 class="u-align-left u-text u-text-default u-text-2">Project Status<br>Project Type<br>Project Du​ration<br>Software Used<br>Languages Used<br>Primary Role(s)<br>Github
        </h4>
        <p class="u-align-left u-text u-text-3">Finished<br>School Project<br>10 Weeks<br>Unity,Photon&nbsp;<br>C#<br>Programmer/UX<br>
          <a href="https://github.com/ATkingma/portfolioCodes/tree/main/map%20gen" class="u-active-none u-border-none u-btn u-button-link u-button-style u-hover-none u-none u-text-palette-1-base u-btn-1" target="_blank">Click Here</a>
        </p>
        <img class="u-image u-image-default u-image-1" src="images/ezgif.com-gif-maker15.gif" alt="" data-image-width="488" data-image-height="279">
      </div>
    </section>
    <section class="u-clearfix u-section-2" id="sec-05cf">
      <div class="u-clearfix u-sheet u-valign-middle-xs u-sheet-1">
        <h1 class="u-text u-text-default u-text-1">About ​Ragnarok</h1>
        <p class="u-text u-text-2"> Ragnarok&nbsp;was&nbsp;a&nbsp;school project. My main role was to get the map working with a grass shader and also a map that uses a seed that&nbsp;will&nbsp;be&nbsp;sent&nbsp;to&nbsp;all&nbsp;the players. The goal in&nbsp;Ragnarok&nbsp;is to survive and get as strong as possible. We added 5 bosses and an end boss first you &nbsp;will need to activate 5 totems where the mini bosses&nbsp;will&nbsp;spawn out of and then the main boss&nbsp;will&nbsp;spawn. You can progress in the game by killing enemies where you&nbsp;will&nbsp;get XP and gold from. Gold can be used to open chests. You also get bonus gold and an item if you activate&nbsp;a&nbsp;normal totem.<br>You can also craft in the game and progress by gathering and upgrading your tools.<br>
          <br>Further more&nbsp;we used Photon for multiplayer and&nbsp;an&nbsp;procedural map generated by&nbsp;an&nbsp;noisemap&nbsp;for our map.<br>We had 10 weeks for this project and our group was made of 3 people, 1 artist and 1 other programmer next to me. We wanted to make&nbsp;an&nbsp;multiplayer game where we could learn from for example how to optimize network information. This was&nbsp;an&nbsp;fun project and I loved testing this.
        </p>
      </div>
    </section>
    <section class="u-clearfix u-section-3" id="carousel_0fdf">
      <div class="u-clearfix u-sheet u-valign-bottom-xs u-valign-middle-lg u-valign-middle-md u-valign-middle-sm u-valign-middle-xl u-sheet-1">
        <h1 class="u-text u-text-default u-text-1">Procedual map</h1>
        <p class="u-text u-text-2"> The&nbsp;map works with&nbsp;a&nbsp;noise map&nbsp;this&nbsp;will&nbsp;be created and&nbsp;a&nbsp;part of it&nbsp;will&nbsp;be&nbsp;used&nbsp;to create&nbsp;a&nbsp;falloffmap&nbsp;after&nbsp;the&nbsp;falloffmap&nbsp;is generated&nbsp;triangles&nbsp;will&nbsp;be created and&nbsp;verts&nbsp;will&nbsp;be set after this the&nbsp;verts&nbsp;will&nbsp;be&nbsp;assigned&nbsp;a&nbsp;color&nbsp;from&nbsp;a&nbsp;gradient&nbsp;and this will be saved on&nbsp;a&nbsp;temporary&nbsp;material.&nbsp;After&nbsp;this&nbsp;process&nbsp;the&nbsp;environment&nbsp;will&nbsp;be spawned then if&nbsp;everything&nbsp;is finish the mesh&nbsp;will&nbsp;be&nbsp;copied&nbsp;and&nbsp;a&nbsp;grass shader&nbsp;will&nbsp;be&nbsp;applied&nbsp;then the host will be baking the&nbsp;navmesh&nbsp;and the players&nbsp;will&nbsp;be spawned when that is done.</p>
      </div>
    </section>
    <section class="u-clearfix u-section-4" id="sec-a981">
      <p class="u-text u-text-1">Here are some code snipeds</p>
      <div class="u-accordion u-align-center u-collapsed-by-default u-spacing-3 u-accordion-1">
        <div class="u-accordion-item">
          <a class="u-accordion-link u-black u-button-style u-text-active-white u-text-body-alt-color u-text-hover-white u-accordion-link-1" id="link-accordion-a910" aria-controls="accordion-a910" aria-selected="false">
            <span class="u-accordion-link-text">NoiseMap</span><span class="u-accordion-link-icon u-icon u-text-white u-icon-1"><svg class="u-svg-link" preserveAspectRatio="xMidYMin slice" viewBox="0 0 512 512" style=""><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#svg-6813"></use></svg><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" xml:space="preserve" class="u-svg-content" viewBox="0 0 512 512" x="0px" y="0px" id="svg-6813" style="enable-background:new 0 0 512 512;"><g><g><path d="M509.121,125.966c-3.838-3.838-10.055-3.838-13.893,0L256.005,365.194L16.771,125.966c-3.838-3.838-10.055-3.838-13.893,0    c-3.838,3.838-3.838,10.055,0,13.893l246.18,246.175c1.842,1.842,4.337,2.878,6.947,2.878c2.61,0,5.104-1.036,6.946-2.878    l246.17-246.175C512.959,136.021,512.959,129.804,509.121,125.966z"></path>
</g>
</g></svg></span>
          </a>
          <div class="u-accordion-pane u-container-style u-image u-image-1" id="" data-image-width="1080" data-image-height="816">
           <div style="background: #333333; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><table><tr><td><pre style="margin: 0; line-height: 125%"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73</pre></td><td><pre style="margin: 0; line-height: 125%"><span style="color: #66d9ef">using</span> <span style="color: #f8f8f2">UnityEngine;</span>
<span style="color: #66d9ef">using</span> <span style="color: #f8f8f2">System.Collections;</span>
<span style="color: #66d9ef">public</span> <span style="color: #66d9ef">static</span> <span style="color: #66d9ef">class</span> <span style="color: #a6e22e">Noise</span>
<span style="color: #f8f8f2">{</span>
	<span style="color: #66d9ef">public</span> <span style="color: #66d9ef">static</span> <span style="color: #66d9ef">float</span><span style="color: #f8f8f2">[,]</span> <span style="color: #f8f8f2">GenerateNoiseMap(</span><span style="color: #66d9ef">int</span> <span style="color: #f8f8f2">mapWidth,</span> <span style="color: #66d9ef">int</span> <span style="color: #f8f8f2">mapHeight,</span><span style="color: #66d9ef">int</span> <span style="color: #f8f8f2">seed,</span> <span style="color: #66d9ef">float</span> <span style="color: #f8f8f2">scale</span> <span style="color: #f8f8f2">,</span> <span style="color: #66d9ef">int</span> <span style="color: #f8f8f2">octaves,</span><span style="color: #66d9ef">float</span> <span style="color: #f8f8f2">persistance,</span><span style="color: #66d9ef">float</span> <span style="color: #f8f8f2">lacunary,Vector2</span> <span style="color: #f8f8f2">offset)</span>
	<span style="color: #f8f8f2">{</span>
		<span style="color: #66d9ef">float</span><span style="color: #f8f8f2">[,]</span> <span style="color: #f8f8f2">noiseMap</span> <span style="color: #f8f8f2">=</span> <span style="color: #66d9ef">new</span> <span style="color: #66d9ef">float</span><span style="color: #f8f8f2">[mapWidth,</span> <span style="color: #f8f8f2">mapHeight];</span>

		<span style="color: #f8f8f2">System.Random</span> <span style="color: #f8f8f2">prng</span> <span style="color: #f8f8f2">=</span> <span style="color: #66d9ef">new</span> <span style="color: #f8f8f2">System.Random(seed);</span>
		<span style="color: #f8f8f2">Vector2[]</span> <span style="color: #f8f8f2">octaveOffsets</span> <span style="color: #f8f8f2">=</span> <span style="color: #66d9ef">new</span> <span style="color: #f8f8f2">Vector2[octaves];</span>

		<span style="color: #66d9ef">for</span><span style="color: #f8f8f2">(</span><span style="color: #66d9ef">int</span> <span style="color: #f8f8f2">i</span> <span style="color: #f8f8f2">=</span><span style="color: #ae81ff">0</span><span style="color: #f8f8f2">;i&lt;</span> <span style="color: #f8f8f2">octaves;</span> <span style="color: #f8f8f2">i++)</span>
		<span style="color: #f8f8f2">{</span>
			<span style="color: #66d9ef">float</span> <span style="color: #f8f8f2">offsetX</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">prng.Next(-</span><span style="color: #ae81ff">100000</span><span style="color: #f8f8f2">,</span><span style="color: #ae81ff">100000</span><span style="color: #f8f8f2">)+</span> <span style="color: #f8f8f2">offset.x;</span>
			<span style="color: #66d9ef">float</span> <span style="color: #f8f8f2">offsetY</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">prng.Next(-</span><span style="color: #ae81ff">100000</span><span style="color: #f8f8f2">,</span> <span style="color: #ae81ff">100000</span><span style="color: #f8f8f2">)+</span> <span style="color: #f8f8f2">offset.y;</span>
			<span style="color: #f8f8f2">octaveOffsets[i]</span> <span style="color: #f8f8f2">=</span> <span style="color: #66d9ef">new</span> <span style="color: #f8f8f2">Vector2(offsetX,</span> <span style="color: #f8f8f2">offsetY);</span>
		<span style="color: #f8f8f2">}</span>

		<span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">(scale</span> <span style="color: #f8f8f2">&lt;=</span> <span style="color: #ae81ff">0</span><span style="color: #f8f8f2">)</span>
		<span style="color: #f8f8f2">{</span>
			<span style="color: #f8f8f2">scale</span> <span style="color: #f8f8f2">=</span> <span style="color: #ae81ff">0.0001f</span><span style="color: #f8f8f2">;</span>
		<span style="color: #f8f8f2">}</span>
		<span style="color: #66d9ef">float</span> <span style="color: #f8f8f2">maxNoiseHeight</span> <span style="color: #f8f8f2">=</span> <span style="color: #66d9ef">float</span><span style="color: #f8f8f2">.MinValue;</span>
		<span style="color: #66d9ef">float</span> <span style="color: #f8f8f2">minNoiseHeight</span> <span style="color: #f8f8f2">=</span> <span style="color: #66d9ef">float</span><span style="color: #f8f8f2">.MaxValue;</span>

		<span style="color: #66d9ef">float</span> <span style="color: #f8f8f2">halfWidth</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">mapWidth</span> <span style="color: #f8f8f2">/</span> <span style="color: #ae81ff">2f</span><span style="color: #f8f8f2">;</span>
		<span style="color: #66d9ef">float</span> <span style="color: #f8f8f2">halfHeight</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">mapHeight</span> <span style="color: #f8f8f2">/</span> <span style="color: #ae81ff">2f</span><span style="color: #f8f8f2">;</span>

		<span style="color: #66d9ef">for</span> <span style="color: #f8f8f2">(</span><span style="color: #66d9ef">int</span> <span style="color: #f8f8f2">y</span> <span style="color: #f8f8f2">=</span> <span style="color: #ae81ff">0</span><span style="color: #f8f8f2">;</span> <span style="color: #f8f8f2">y</span> <span style="color: #f8f8f2">&lt;</span> <span style="color: #f8f8f2">mapHeight;</span> <span style="color: #f8f8f2">y++)</span>
		<span style="color: #f8f8f2">{</span>
			<span style="color: #66d9ef">for</span> <span style="color: #f8f8f2">(</span><span style="color: #66d9ef">int</span> <span style="color: #f8f8f2">x</span> <span style="color: #f8f8f2">=</span> <span style="color: #ae81ff">0</span><span style="color: #f8f8f2">;</span> <span style="color: #f8f8f2">x</span> <span style="color: #f8f8f2">&lt;</span> <span style="color: #f8f8f2">mapWidth;</span> <span style="color: #f8f8f2">x++)</span>
			<span style="color: #f8f8f2">{</span>
				<span style="color: #66d9ef">float</span> <span style="color: #f8f8f2">amplitudes</span> <span style="color: #f8f8f2">=</span> <span style="color: #ae81ff">1</span><span style="color: #f8f8f2">;</span>
				<span style="color: #66d9ef">float</span> <span style="color: #f8f8f2">frequency</span> <span style="color: #f8f8f2">=</span> <span style="color: #ae81ff">1</span><span style="color: #f8f8f2">;</span>
				<span style="color: #66d9ef">float</span> <span style="color: #f8f8f2">noiseHeight</span> <span style="color: #f8f8f2">=</span> <span style="color: #ae81ff">0</span><span style="color: #f8f8f2">;</span>

				<span style="color: #66d9ef">for</span> <span style="color: #f8f8f2">(</span><span style="color: #66d9ef">int</span> <span style="color: #f8f8f2">i</span> <span style="color: #f8f8f2">=</span> <span style="color: #ae81ff">0</span><span style="color: #f8f8f2">;</span> <span style="color: #f8f8f2">i</span> <span style="color: #f8f8f2">&lt;</span> <span style="color: #f8f8f2">octaves;</span> <span style="color: #f8f8f2">i++)</span>
				<span style="color: #f8f8f2">{</span>
					<span style="color: #66d9ef">float</span> <span style="color: #f8f8f2">sampleX</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">(x-halfWidth)</span> <span style="color: #f8f8f2">/</span> <span style="color: #f8f8f2">scale*frequency</span> <span style="color: #f8f8f2">+</span> <span style="color: #f8f8f2">octaveOffsets[i].x;</span>
					<span style="color: #66d9ef">float</span> <span style="color: #f8f8f2">sampleY</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">(y</span> <span style="color: #f8f8f2">-</span> <span style="color: #f8f8f2">halfHeight)</span> <span style="color: #f8f8f2">/</span> <span style="color: #f8f8f2">scale*frequency</span> <span style="color: #f8f8f2">+</span> <span style="color: #f8f8f2">octaveOffsets[i].y;</span>

					<span style="color: #66d9ef">float</span> <span style="color: #f8f8f2">perlinValue</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">Mathf.PerlinNoise(sampleX,</span> <span style="color: #f8f8f2">sampleY)*</span><span style="color: #ae81ff">2</span><span style="color: #f8f8f2">-</span><span style="color: #ae81ff">1</span><span style="color: #f8f8f2">;</span>
					<span style="color: #f8f8f2">noiseHeight</span> <span style="color: #f8f8f2">+=</span> <span style="color: #f8f8f2">perlinValue</span> <span style="color: #f8f8f2">*</span> <span style="color: #f8f8f2">amplitudes;</span>

					<span style="color: #f8f8f2">amplitudes</span> <span style="color: #f8f8f2">*=</span> <span style="color: #f8f8f2">persistance;</span>
					<span style="color: #f8f8f2">frequency</span> <span style="color: #f8f8f2">*=</span> <span style="color: #f8f8f2">lacunary;</span>
				<span style="color: #f8f8f2">}</span>


				<span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">(noiseHeight</span> <span style="color: #f8f8f2">&gt;</span> <span style="color: #f8f8f2">maxNoiseHeight)</span>
				<span style="color: #f8f8f2">{</span>
					<span style="color: #f8f8f2">maxNoiseHeight</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">noiseHeight;</span>
				<span style="color: #f8f8f2">}</span>
				<span style="color: #66d9ef">else</span> <span style="color: #a6e22e">if</span> <span style="color: #f8f8f2">(noiseHeight</span> <span style="color: #f8f8f2">&lt;</span> <span style="color: #f8f8f2">minNoiseHeight)</span>
				<span style="color: #f8f8f2">{</span>
					<span style="color: #f8f8f2">minNoiseHeight</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">noiseHeight;</span>
				<span style="color: #f8f8f2">}</span>

				<span style="color: #f8f8f2">noiseMap[x,</span> <span style="color: #f8f8f2">y]</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">noiseHeight;</span>
			<span style="color: #f8f8f2">}</span>
		<span style="color: #f8f8f2">}</span>

		<span style="color: #66d9ef">for</span> <span style="color: #f8f8f2">(</span><span style="color: #66d9ef">int</span> <span style="color: #f8f8f2">y</span> <span style="color: #f8f8f2">=</span> <span style="color: #ae81ff">0</span><span style="color: #f8f8f2">;</span> <span style="color: #f8f8f2">y</span> <span style="color: #f8f8f2">&lt;</span> <span style="color: #f8f8f2">mapHeight;</span> <span style="color: #f8f8f2">y++)</span>
		<span style="color: #f8f8f2">{</span>
			<span style="color: #66d9ef">for</span> <span style="color: #f8f8f2">(</span><span style="color: #66d9ef">int</span> <span style="color: #f8f8f2">x</span> <span style="color: #f8f8f2">=</span> <span style="color: #ae81ff">0</span><span style="color: #f8f8f2">;</span> <span style="color: #f8f8f2">x</span> <span style="color: #f8f8f2">&lt;</span> <span style="color: #f8f8f2">mapWidth;</span> <span style="color: #f8f8f2">x++)</span>
			<span style="color: #f8f8f2">{</span>
				<span style="color: #f8f8f2">noiseMap[x,</span> <span style="color: #f8f8f2">y]</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">Mathf.InverseLerp(minNoiseHeight,</span> <span style="color: #f8f8f2">maxNoiseHeight,</span> <span style="color: #f8f8f2">noiseMap[x,</span> <span style="color: #f8f8f2">y]);</span>
			<span style="color: #f8f8f2">}</span>
		<span style="color: #f8f8f2">}</span>

		<span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">noiseMap;</span>
	<span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">}</span>
</pre></td></tr></table></div>
          </div>
        </div>
      </div>
    </section>
    <section class="u-clearfix u-valign-middle-lg u-valign-middle-md u-valign-middle-sm u-valign-middle-xs u-section-5" id="carousel_cd13">
      <div class="u-accordion u-align-center u-collapsed-by-default u-spacing-3 u-accordion-1">
        <div class="u-accordion-item">
          <a class="u-accordion-link u-black u-button-style u-text-active-white u-text-body-alt-color u-text-hover-white u-accordion-link-1" id="link-accordion-a910" aria-controls="accordion-a910" aria-selected="false">
            <span class="u-accordion-link-text">FalloffMap</span><span class="u-accordion-link-icon u-icon u-text-white u-icon-1"><svg class="u-svg-link" preserveAspectRatio="xMidYMin slice" viewBox="0 0 512 512" style=""><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#svg-6813"></use></svg><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" xml:space="preserve" class="u-svg-content" viewBox="0 0 512 512" x="0px" y="0px" id="svg-6813" style="enable-background:new 0 0 512 512;"><g><g><path d="M509.121,125.966c-3.838-3.838-10.055-3.838-13.893,0L256.005,365.194L16.771,125.966c-3.838-3.838-10.055-3.838-13.893,0    c-3.838,3.838-3.838,10.055,0,13.893l246.18,246.175c1.842,1.842,4.337,2.878,6.947,2.878c2.61,0,5.104-1.036,6.946-2.878    l246.17-246.175C512.959,136.021,512.959,129.804,509.121,125.966z"></path>
</g>
</g></svg></span>
          </a>
          <div class="u-accordion-pane u-container-style u-accordion-pane-1" id="accordion-a910" aria-labelledby="link-accordion-a910">
            <div class="u-container-layout u-valign-top u-container-layout-1">
                <div style="background: #333333; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><table><tr><td><pre style="margin: 0; line-height: 125%"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31</pre></td><td><pre style="margin: 0; line-height: 125%"><span style="color: #66d9ef">using</span> <span style="color: #f8f8f2">UnityEngine;</span>
<span style="color: #66d9ef">using</span> <span style="color: #f8f8f2">System.Collections;</span>
<span style="color: #66d9ef">public</span> <span style="color: #66d9ef">static</span> <span style="color: #66d9ef">class</span> <span style="color: #a6e22e">FalloffGenerator</span>
<span style="color: #f8f8f2">{</span>
	<span style="color: #66d9ef">public</span> <span style="color: #66d9ef">static</span> <span style="color: #66d9ef">float</span><span style="color: #f8f8f2">[,]</span> <span style="color: #f8f8f2">GenerateFalloffMap(</span><span style="color: #66d9ef">int</span> <span style="color: #f8f8f2">size)</span>
	<span style="color: #f8f8f2">{</span>
		<span style="color: #66d9ef">float</span><span style="color: #f8f8f2">[,]</span> <span style="color: #f8f8f2">map</span> <span style="color: #f8f8f2">=</span> <span style="color: #66d9ef">new</span> <span style="color: #66d9ef">float</span><span style="color: #f8f8f2">[size,</span> <span style="color: #f8f8f2">size];</span>

		<span style="color: #66d9ef">for</span> <span style="color: #f8f8f2">(</span><span style="color: #66d9ef">int</span> <span style="color: #f8f8f2">i</span> <span style="color: #f8f8f2">=</span> <span style="color: #ae81ff">0</span><span style="color: #f8f8f2">;</span> <span style="color: #f8f8f2">i</span> <span style="color: #f8f8f2">&lt;</span> <span style="color: #f8f8f2">size;</span> <span style="color: #f8f8f2">i++)</span>
		<span style="color: #f8f8f2">{</span>
			<span style="color: #66d9ef">for</span> <span style="color: #f8f8f2">(</span><span style="color: #66d9ef">int</span> <span style="color: #f8f8f2">j</span> <span style="color: #f8f8f2">=</span> <span style="color: #ae81ff">0</span><span style="color: #f8f8f2">;</span> <span style="color: #f8f8f2">j</span> <span style="color: #f8f8f2">&lt;</span> <span style="color: #f8f8f2">size;</span> <span style="color: #f8f8f2">j++)</span>
			<span style="color: #f8f8f2">{</span>
				<span style="color: #66d9ef">float</span> <span style="color: #f8f8f2">x</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">i</span> <span style="color: #f8f8f2">/</span> <span style="color: #f8f8f2">(</span><span style="color: #66d9ef">float</span><span style="color: #f8f8f2">)size</span> <span style="color: #f8f8f2">*</span> <span style="color: #ae81ff">2</span> <span style="color: #f8f8f2">-</span> <span style="color: #ae81ff">1</span><span style="color: #f8f8f2">;</span>
				<span style="color: #66d9ef">float</span> <span style="color: #f8f8f2">y</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">j</span> <span style="color: #f8f8f2">/</span> <span style="color: #f8f8f2">(</span><span style="color: #66d9ef">float</span><span style="color: #f8f8f2">)size</span> <span style="color: #f8f8f2">*</span> <span style="color: #ae81ff">2</span> <span style="color: #f8f8f2">-</span> <span style="color: #ae81ff">1</span><span style="color: #f8f8f2">;</span>

				<span style="color: #66d9ef">float</span> <span style="color: #66d9ef">value</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">Mathf.Max(Mathf.Abs(x),</span> <span style="color: #f8f8f2">Mathf.Abs(y));</span>
				<span style="color: #f8f8f2">map[i,</span> <span style="color: #f8f8f2">j]</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">Evaluate(</span><span style="color: #66d9ef">value</span><span style="color: #f8f8f2">);</span>
			<span style="color: #f8f8f2">}</span>
		<span style="color: #f8f8f2">}</span>

		<span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">map;</span>
	<span style="color: #f8f8f2">}</span>

	<span style="color: #66d9ef">static</span> <span style="color: #66d9ef">float</span> <span style="color: #a6e22e">Evaluate</span><span style="color: #f8f8f2">(</span><span style="color: #66d9ef">float</span> <span style="color: #66d9ef">value</span><span style="color: #f8f8f2">)</span>
	<span style="color: #f8f8f2">{</span>
		<span style="color: #66d9ef">float</span> <span style="color: #f8f8f2">a</span> <span style="color: #f8f8f2">=</span> <span style="color: #ae81ff">3</span><span style="color: #f8f8f2">;</span>
		<span style="color: #66d9ef">float</span> <span style="color: #f8f8f2">b</span> <span style="color: #f8f8f2">=</span> <span style="color: #ae81ff">2.2f</span><span style="color: #f8f8f2">;</span>

		<span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">Mathf.Pow(</span><span style="color: #66d9ef">value</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">a)</span> <span style="color: #f8f8f2">/</span> <span style="color: #f8f8f2">(Mathf.Pow(</span><span style="color: #66d9ef">value</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">a)</span> <span style="color: #f8f8f2">+</span> <span style="color: #f8f8f2">Mathf.Pow(b</span> <span style="color: #f8f8f2">-</span> <span style="color: #f8f8f2">b</span> <span style="color: #f8f8f2">*</span> <span style="color: #66d9ef">value</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">a));</span>
	<span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">}</span>
</pre></td></tr></table></div>

            </div>
          </div>
        </div>
      </div>
    </section>
    <section class="u-clearfix u-valign-middle u-section-6" id="carousel_fd69">
      <div class="u-accordion u-align-center u-collapsed-by-default u-spacing-3 u-accordion-1">
        <div class="u-accordion-item">
          <a class="u-accordion-link u-black u-button-style u-text-active-white u-text-body-alt-color u-text-hover-white u-accordion-link-1" id="link-accordion-a910" aria-controls="accordion-a910" aria-selected="false">
            <span class="u-accordion-link-text">MapGenerator</span><span class="u-accordion-link-icon u-icon u-text-white u-icon-1"><svg class="u-svg-link" preserveAspectRatio="xMidYMin slice" viewBox="0 0 512 512" style=""><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#svg-6813"></use></svg><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" xml:space="preserve" class="u-svg-content" viewBox="0 0 512 512" x="0px" y="0px" id="svg-6813" style="enable-background:new 0 0 512 512;"><g><g><path d="M509.121,125.966c-3.838-3.838-10.055-3.838-13.893,0L256.005,365.194L16.771,125.966c-3.838-3.838-10.055-3.838-13.893,0    c-3.838,3.838-3.838,10.055,0,13.893l246.18,246.175c1.842,1.842,4.337,2.878,6.947,2.878c2.61,0,5.104-1.036,6.946-2.878    l246.17-246.175C512.959,136.021,512.959,129.804,509.121,125.966z"></path>
</g>
</g></svg></span>
          </a>
          <div class="u-accordion-pane u-container-style u-accordion-pane-1" id="accordion-a910" aria-labelledby="link-accordion-a910">
            <div class="u-container-layout u-container-layout-1">
           <div style="background: #333333; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><table><tr><td><pre style="margin: 0; line-height: 125%"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99</pre></td><td><pre style="margin: 0; line-height: 125%"><span style="color: #66d9ef">using</span> <span style="color: #f8f8f2">System.Collections;</span>
<span style="color: #66d9ef">using</span> <span style="color: #f8f8f2">System.Collections.Generic;</span>
<span style="color: #66d9ef">using</span> <span style="color: #f8f8f2">UnityEngine;</span>
<span style="color: #66d9ef">public</span> <span style="color: #66d9ef">class</span> <span style="color: #a6e22e">MapGenerator</span> <span style="color: #f8f8f2">:</span> <span style="color: #f8f8f2">MonoBehaviour</span>
<span style="color: #f8f8f2">{</span>
    <span style="color: #75715e">// public</span>
    <span style="color: #66d9ef">public</span> <span style="color: #f8f8f2">Gradient</span> <span style="color: #f8f8f2">gradient;</span>
<span style="color: #a6e22e">    [Range(0, 6)]</span>
    <span style="color: #66d9ef">public</span> <span style="color: #66d9ef">int</span> <span style="color: #f8f8f2">editorPreviewLOD;</span>
    <span style="color: #66d9ef">public</span> <span style="color: #66d9ef">int</span> <span style="color: #f8f8f2">octaves;</span>
    <span style="color: #66d9ef">public</span> <span style="color: #66d9ef">int</span> <span style="color: #f8f8f2">mapSeed;</span>
<span style="color: #a6e22e">    [Range(0, 1)]</span>
    <span style="color: #66d9ef">public</span> <span style="color: #66d9ef">float</span> <span style="color: #f8f8f2">persistance;</span>
    <span style="color: #66d9ef">public</span> <span style="color: #66d9ef">float</span> <span style="color: #f8f8f2">meshHeightMultiplier;</span>
    <span style="color: #66d9ef">public</span> <span style="color: #66d9ef">float</span> <span style="color: #f8f8f2">lacunary;</span>
    <span style="color: #66d9ef">public</span> <span style="color: #66d9ef">float</span> <span style="color: #f8f8f2">noiseScale;</span>
    <span style="color: #66d9ef">public</span> <span style="color: #66d9ef">float</span><span style="color: #f8f8f2">[,]</span> <span style="color: #f8f8f2">fallOffMap;</span>
    <span style="color: #66d9ef">public</span> <span style="color: #f8f8f2">AnimationCurve</span> <span style="color: #f8f8f2">meshHeightCurve;</span>
    <span style="color: #66d9ef">public</span> <span style="color: #f8f8f2">Vector2</span> <span style="color: #f8f8f2">offset;</span>
    <span style="color: #66d9ef">public</span> <span style="color: #66d9ef">bool</span> <span style="color: #f8f8f2">useFallOffs;</span>
    <span style="color: #66d9ef">public</span> <span style="color: #66d9ef">bool</span> <span style="color: #f8f8f2">generateEnvironment;</span>
    <span style="color: #66d9ef">public</span> <span style="color: #66d9ef">bool</span> <span style="color: #f8f8f2">flatShading;</span>
    <span style="color: #66d9ef">public</span> <span style="color: #f8f8f2">GameObject</span> <span style="color: #f8f8f2">terrainObject;</span>


    <span style="color: #75715e">//private</span>
    <span style="color: #66d9ef">private</span> <span style="color: #66d9ef">float</span> <span style="color: #f8f8f2">minTerrainheight;</span>
    <span style="color: #66d9ef">private</span> <span style="color: #66d9ef">float</span> <span style="color: #f8f8f2">maxTerrainheight;</span>
    <span style="color: #66d9ef">const</span> <span style="color: #66d9ef">int</span> <span style="color: #f8f8f2">chuckSize</span> <span style="color: #f8f8f2">=</span> <span style="color: #ae81ff">241</span><span style="color: #f8f8f2">;</span>

    <span style="color: #66d9ef">private</span> <span style="color: #66d9ef">void</span> <span style="color: #a6e22e">Start</span><span style="color: #f8f8f2">()</span>
    <span style="color: #f8f8f2">{</span>
        <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">(mapSeed</span> <span style="color: #f8f8f2">==</span> <span style="color: #ae81ff">0</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
            <span style="color: #f8f8f2">mapSeed</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">Random.Range(</span><span style="color: #ae81ff">0</span><span style="color: #f8f8f2">,</span> <span style="color: #ae81ff">99999</span><span style="color: #f8f8f2">);</span>
		<span style="color: #f8f8f2">}</span>

        <span style="color: #f8f8f2">GenerateMap();</span>
    <span style="color: #f8f8f2">}</span>

	<span style="color: #66d9ef">private</span> <span style="color: #66d9ef">void</span> <span style="color: #a6e22e">Update</span><span style="color: #f8f8f2">()</span>
	<span style="color: #f8f8f2">{</span>

        <span style="color: #f8f8f2">mapSeed</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">Random.Range(</span><span style="color: #ae81ff">0</span><span style="color: #f8f8f2">,</span> <span style="color: #ae81ff">99999</span><span style="color: #f8f8f2">);</span>
        <span style="color: #f8f8f2">GenerateMap();</span>
		
    <span style="color: #f8f8f2">}</span>

	<span style="color: #66d9ef">public</span> <span style="color: #66d9ef">void</span> <span style="color: #a6e22e">GenerateMap</span><span style="color: #f8f8f2">()</span>
    <span style="color: #f8f8f2">{</span>
        <span style="color: #f8f8f2">Random.InitState(mapSeed);</span><span style="color: #75715e">//seed</span>
        <span style="color: #f8f8f2">fallOffMap</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">FalloffGenerator.GenerateFalloffMap(chuckSize);</span>
        <span style="color: #66d9ef">float</span><span style="color: #f8f8f2">[,]</span> <span style="color: #f8f8f2">noisemap</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">Noise.GenerateNoiseMap(chuckSize,</span> <span style="color: #f8f8f2">chuckSize,</span> <span style="color: #f8f8f2">mapSeed,</span> <span style="color: #f8f8f2">noiseScale,</span> <span style="color: #f8f8f2">octaves,</span> <span style="color: #f8f8f2">persistance,</span> <span style="color: #f8f8f2">lacunary,</span> <span style="color: #f8f8f2">offset);</span>

        <span style="color: #f8f8f2">Color[]</span> <span style="color: #f8f8f2">colorMap</span> <span style="color: #f8f8f2">=</span> <span style="color: #66d9ef">new</span> <span style="color: #f8f8f2">Color[chuckSize</span> <span style="color: #f8f8f2">*</span> <span style="color: #f8f8f2">chuckSize];</span>
        <span style="color: #66d9ef">for</span> <span style="color: #f8f8f2">(</span><span style="color: #66d9ef">int</span> <span style="color: #f8f8f2">y</span> <span style="color: #f8f8f2">=</span> <span style="color: #ae81ff">0</span><span style="color: #f8f8f2">;</span> <span style="color: #f8f8f2">y</span> <span style="color: #f8f8f2">&lt;</span> <span style="color: #f8f8f2">chuckSize;</span> <span style="color: #f8f8f2">y++)</span>
        <span style="color: #f8f8f2">{</span>
            <span style="color: #66d9ef">for</span> <span style="color: #f8f8f2">(</span><span style="color: #66d9ef">int</span> <span style="color: #f8f8f2">x</span> <span style="color: #f8f8f2">=</span> <span style="color: #ae81ff">0</span><span style="color: #f8f8f2">;</span> <span style="color: #f8f8f2">x</span> <span style="color: #f8f8f2">&lt;</span> <span style="color: #f8f8f2">chuckSize;</span> <span style="color: #f8f8f2">x++)</span>
            <span style="color: #f8f8f2">{</span>
                <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">(useFallOffs)</span>
                <span style="color: #f8f8f2">{</span>
                    <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">(fallOffMap</span> <span style="color: #f8f8f2">==</span> <span style="color: #66d9ef">null</span><span style="color: #f8f8f2">)</span>
                    <span style="color: #f8f8f2">{</span>
                        <span style="color: #f8f8f2">fallOffMap</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">FalloffGenerator.GenerateFalloffMap(chuckSize);</span>
                    <span style="color: #f8f8f2">}</span>
                    <span style="color: #f8f8f2">noisemap[x,</span> <span style="color: #f8f8f2">y]</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">Mathf.Clamp01(noisemap[x,</span> <span style="color: #f8f8f2">y]</span> <span style="color: #f8f8f2">-</span> <span style="color: #f8f8f2">fallOffMap[x,</span> <span style="color: #f8f8f2">y]);</span>
                <span style="color: #f8f8f2">}</span>
            <span style="color: #f8f8f2">}</span>
        <span style="color: #f8f8f2">}</span>

        <span style="color: #f8f8f2">MapDisplay</span> <span style="color: #f8f8f2">display</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">FindObjectOfType&lt;MapDisplay&gt;();</span>
        <span style="color: #f8f8f2">display.DrawMesh(MeshGenerator.GenerateTerrainMesh(noisemap,</span> <span style="color: #f8f8f2">meshHeightMultiplier,</span> <span style="color: #f8f8f2">meshHeightCurve,</span> <span style="color: #f8f8f2">editorPreviewLOD,</span> <span style="color: #f8f8f2">flatShading,GetComponent&lt;MapGenerator&gt;()),</span> <span style="color: #f8f8f2">TextureGenerator.TextureFromColourMap(colorMap,</span> <span style="color: #f8f8f2">chuckSize,</span> <span style="color: #f8f8f2">chuckSize));</span>

        <span style="color: #f8f8f2">ColorMap();</span>
    <span style="color: #f8f8f2">}</span>

    <span style="color: #66d9ef">private</span> <span style="color: #66d9ef">void</span> <span style="color: #a6e22e">SetMinMaxHeights</span><span style="color: #f8f8f2">(</span><span style="color: #66d9ef">float</span> <span style="color: #f8f8f2">noiseHeight)</span>
    <span style="color: #f8f8f2">{</span>
        <span style="color: #75715e">// Set min and max height of map for color gradient</span>
        <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">(noiseHeight</span> <span style="color: #f8f8f2">&gt;</span> <span style="color: #f8f8f2">maxTerrainheight)</span>
            <span style="color: #f8f8f2">maxTerrainheight</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">noiseHeight;</span>
        <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">(noiseHeight</span> <span style="color: #f8f8f2">&lt;</span> <span style="color: #f8f8f2">minTerrainheight)</span>
            <span style="color: #f8f8f2">minTerrainheight</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">noiseHeight;</span>
    <span style="color: #f8f8f2">}</span>

    <span style="color: #66d9ef">public</span> <span style="color: #66d9ef">void</span> <span style="color: #a6e22e">ColorMap</span><span style="color: #f8f8f2">()</span>
    <span style="color: #f8f8f2">{</span>
		<span style="color: #f8f8f2">Mesh</span> <span style="color: #f8f8f2">mesh</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">terrainObject.GetComponent&lt;MeshFilter&gt;().mesh;</span>
        <span style="color: #f8f8f2">Vector3[]</span> <span style="color: #f8f8f2">vertices</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">mesh.vertices;</span>
        <span style="color: #f8f8f2">Color[]</span> <span style="color: #f8f8f2">colors</span> <span style="color: #f8f8f2">=</span> <span style="color: #66d9ef">new</span> <span style="color: #f8f8f2">Color[vertices.Length];</span>
        <span style="color: #66d9ef">for</span> <span style="color: #f8f8f2">(</span><span style="color: #66d9ef">int</span> <span style="color: #f8f8f2">i</span> <span style="color: #f8f8f2">=</span> <span style="color: #ae81ff">0</span><span style="color: #f8f8f2">;</span> <span style="color: #f8f8f2">i</span> <span style="color: #f8f8f2">&lt;</span> <span style="color: #f8f8f2">vertices.Length;</span> <span style="color: #f8f8f2">i++)</span>
        <span style="color: #f8f8f2">{</span>
            <span style="color: #f8f8f2">SetMinMaxHeights(vertices[i].y);</span>
            <span style="color: #66d9ef">float</span> <span style="color: #f8f8f2">height</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">Mathf.InverseLerp(minTerrainheight,</span> <span style="color: #f8f8f2">maxTerrainheight,</span> <span style="color: #f8f8f2">vertices[i].y);</span>
            <span style="color: #f8f8f2">colors[i]</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">gradient.Evaluate(height);</span>
            <span style="color: #66d9ef">new</span> <span style="color: #a6e22e">WaitForSeconds</span><span style="color: #f8f8f2">(</span><span style="color: #ae81ff">0.001f</span><span style="color: #f8f8f2">);</span>
        <span style="color: #f8f8f2">}</span>
        <span style="color: #f8f8f2">mesh.colors</span> <span style="color: #f8f8f2">=</span> <span style="color: #f8f8f2">colors;</span>
    <span style="color: #f8f8f2">}</span>
<span style="color: #f8f8f2">}</span>
</pre></td></tr></table></div>

            </div>
          </div>
        </div>
      </div>
    </section>
    
    
    <footer class="u-align-center u-clearfix u-custom-color-2 u-footer u-footer" id="sec-0f65"><div class="u-clearfix u-sheet u-sheet-1">
        <p class="u-small-text u-text u-text-variant u-text-1"> © Timme Kingma 2022</p>
      </div></footer>
  </body>
</html>
